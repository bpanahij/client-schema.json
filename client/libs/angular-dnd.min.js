angular.module("dragAndDrop",[]).directive("drag",["dndApi",function(a){var b=[],c=function(a,b){if(b>5)return!1;var d=a.parent();return d.hasClass("drop")?d[0]:(b++,c(d,b))};return{restrict:"A",link:function(d,e,f){var g=d.$eval(f.ngModel);if(!angular.isUndefined(g)){var h=e[0],i=d.$eval(f.start),j=d.$eval(f.end);h.addEventListener("dragstart",function(f){0===b.length&&(b=document.querySelectorAll(".drop")),angular.forEach(a.areas(),function(a){a[0]!==c(e,0)&&a.addClass("draging")}),e.addClass("on-drag"),a.setData(g,e),(f.originalEvent||f).dataTransfer.effectAllowed="move",(f.originalEvent||f).dataTransfer.setData("text","no-data"),angular.isFunction(i)&&d.$apply(function(){i(a.getData(),e)})}),h.addEventListener("dragend",function(){e.removeClass("on-drag"),angular.forEach(a.areas(),function(a){a.removeClass("draging")}),angular.isFunction(j)&&d.$apply(function(){j(a.getData(),e)}),a.clear()}),h.draggable=!0,e.addClass("drag")}}}}]).directive("drop",["dndApi",function(a){return{link:function(b,c,d){var e=c[0],f=b.$eval(d.drop),g=b.$eval(d.enter),h=b.$eval(d.leave),i=e.offsetLeft,j=i+e.offsetWidth,k=e.offsetTop,l=k+e.offsetHeight;a.addArea(c),e.addEventListener("drop",function(d){var e=a.getData();c.hasClass("draging")&&(d.stopPropagation()&&d.preventDefault(),angular.isFunction(f)&&b.$apply(function(){f(e.data,e.element)}),angular.forEach(a.areas(),function(a){a.addClass("draging")}),a.clear())}),e.addEventListener("dragenter",function(c){e===c.target&&angular.isFunction(g)&&b.$apply(function(){var b=a.getData();g(b.data,b.element)})}),e.addEventListener("dragleave",function(c){(c.x<i||c.x>j||c.y<k||c.y>l)&&angular.isFunction(h)&&b.$apply(function(){var b=a.getData();h(b.data,b.element)})}),e.addEventListener("dragover",function(a){return a.preventDefault&&a.preventDefault(),!1}),c.addClass("drop")}}}]).factory("dndApi",function(){var a={dragObject:{}},b=[];return{addArea:function(a){b.push(a)},areas:function(){return b},setData:function(b,c){a.drag={data:b,element:c}},clear:function(){delete a.drag},getData:function(){return a.drag}}});
//# sourceMappingURL=angular-dnd.min.js.map